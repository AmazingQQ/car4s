<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
    	http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc.xsd">

        
   		<!-- 配置controller在哪个包下 -->
    	<context:component-scan base-package="com.xiaoyu.car4s.controller"></context:component-scan>
       
       <!-- 配置视图解析器 -->
        <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
	   	    <property name="prefix" value="/WEB-INF/jsp/"/>
	   	    <property name="suffix" value=".jsp"/>
	   	</bean>
		
		
	   	<!-- 解开静态资源 -->
	   	<mvc:default-servlet-handler/>
	   	
	   		
	   	<!-- 启动拦截器 -->
	  	  <mvc:interceptors>
	   		<mvc:interceptor>
	   			<!--拦  截-->
	   			<mvc:mapping path="/**"/>
	   			<!--放行-->
	   			<mvc:exclude-mapping path="/login"/>
	   			<mvc:exclude-mapping path="/doLogin"/>
	   			<mvc:exclude-mapping path="/register"/>
	   			<mvc:exclude-mapping path="/ajaxCheckUsername"/>
	   			<mvc:exclude-mapping path="/css/**"/>
	   			<mvc:exclude-mapping path="/fonts/**"/>
	   			<mvc:exclude-mapping path="/images/**"/>
	   			<mvc:exclude-mapping path="/js/**"/>
	   			<bean class="com.xiaoyu.car4s.utils.LoginInterceptor"></bean>
	   		</mvc:interceptor>
	   	</mvc:interceptors>
	   	 
	   	<!-- 校验器 -->
	<bean id="validator"
		class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
		<!-- hibernate校验器 -->
		<property name="providerClass" value="org.hibernate.validator.HibernateValidator" />
		<!-- 指定校验使用的资源文件，在文件中配置校验错误信息，如果不指定则默认使用classpath下的ValidationMessages.properties -->
		<property name="validationMessageSource" ref="messageSource" />
	</bean>
   	<!-- 校验错误信息配置文件 -->
	<bean id="messageSource"
		class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
		<!-- 资源文件名 -->
		<property name="basenames">
			<list>
				<value>classpath:ValidationMessages_zhCN</value>
			</list>
		</property>
		<property name="defaultEncoding" value="utf-8"></property>
		<!-- 资源文件编码格式 -->
		<property name="fileEncodings" value="utf-8" />
		<!-- 对资源文件内容缓存时间，单位秒，放到生产时调大缓存时间 -->
		<property name="cacheSeconds" value="10" />
	</bean>
		
	   	 <!-- 上传文件 的多媒体文件解析器-->
	  	<!-- <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
	  		<property name="defaultEncoding" value="UTF-8"></property>
	  		<property name="maxInMemorySize" value="10240"></property>使用的最大内存
	  		<property name="maxUploadSize" value="5242880"></property>上传文件的最大值
	  	</bean> -->
	  	
	  <!-- 注解驱动 -->
   	    <mvc:annotation-driven validator="validator"></mvc:annotation-driven>
   	    	
   </beans>